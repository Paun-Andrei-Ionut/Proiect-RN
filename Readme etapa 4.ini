# ğŸ“˜ README â€“ Etapa 4: Arhitectura CompletÄƒ a AplicaÈ›iei SIA bazatÄƒ pe ReÈ›ele Neuronale

**Disciplina:** ReÈ›ele Neuronale  
**InstituÈ›ie:** POLITEHNICA BucureÈ™ti â€“ FIIR  
**Student:** Paun Ionut-Andrei  
**Grupa:** 634AB  
**Link Repository GitHub:** [https://github.com/Paun-Andrei-Ionut/Proiect-RN.git]  
**Data:** 04.12.2024  

---

## Scopul Etapei 4
AceastÄƒ etapÄƒ prezintÄƒ scheletul complet È™i funcÈ›ional al Sistemului cu InteligenÈ›Äƒ ArtificialÄƒ (SIA) pentru sortarea automatÄƒ a deÈ™eurilor. AplicaÈ›ia integreazÄƒ achiziÈ›ia de date, modelul neuronal È™i interfaÈ›a de utilizare Ã®ntr-un flux continuu, demonstrÃ¢nd o arhitecturÄƒ modularÄƒ È™i scalabilÄƒ.

---

## 1. Tabelul Nevoie RealÄƒ â†’ SoluÈ›ie SIA â†’ Modul Software

| **Nevoie realÄƒ concretÄƒ** | **Cum o rezolvÄƒ SIA-ul vostru** | **Modul software responsabil** |
|---------------------------|--------------------------------|--------------------------------|
| Automatizarea sortÄƒrii deÈ™eurilor reciclabile pentru reducerea timpului manual | Clasificare imagine camerÄƒ video â†’ comandÄƒ vizualÄƒ de sortare Ã®n < 2 secunde | **Modul App (UI) + Neural Network** |
| Reducerea erorilor umane Ã®n identificarea materialelor similare (SticlÄƒ vs Plastic) | RecunoaÈ™tere vizualÄƒ cu reÈ›ea neuronalÄƒ CNN â†’ precizie > 80% pe setul de validare | **Modul Neural Network** |
| Colectarea rapidÄƒ a datelor noi pentru re-antrenarea modelului Ã®n medii specifice | Script automatizat de capturÄƒ È™i etichetare cu salvare structuratÄƒ | **Modul Data Acquisition** |

---

## 2. ContribuÈ›ia OriginalÄƒ la Setul de Date

**Total observaÈ›ii finale:** 1500 imagini  
**ObservaÈ›ii originale:** 600 (40%)

**Tipul contribuÈ›iei:**
[X] Date achiziÈ›ionate cu senzori proprii  
[ ] Date generate prin simulare fizicÄƒ  
[ ] Etichetare/adnotare manualÄƒ  

**Descriere detaliatÄƒ:**
Am dezvoltat un modul software dedicat (`src/data_acquisition/collect_data.py`) care permite capturarea rapidÄƒ a imaginilor utilizÃ¢nd camera web È™i etichetarea lor automatÄƒ Ã®n foldere specifice (`glass`, `paper`, etc.) prin apÄƒsarea tastelor dedicate.

Pentru a respecta regula de 40% È™i a asigura robusteÈ›ea modelului la condiÈ›ii reale, am utilizat acest modul pentru a fotografia deÈ™euri reale din gospodÄƒrie. Am aplicat o strategie de achiziÈ›ie variatÄƒ:
1.  **Unghiuri multiple:** Fiecare obiect a fost rotit la 360 de grade.
2.  **Iluminare:** S-au capturat imagini atÃ¢t la luminÄƒ naturalÄƒ, cÃ¢t È™i artificialÄƒ.
3.  **Fundal:** S-a utilizat un fundal neutru, dar È™i unul complex pentru a testa capacitatea de generalizare.

**LocaÈ›ia codului:** `src/data_acquisition/collect_data.py`  
**LocaÈ›ia datelor:** `data/generated/`

---

## 3. Diagrama State Machine a Ãntregului Sistem

**LocaÈ›ia diagramei:** `docs/state_machine.png`

![State Machine Diagram](docs/state_machine.png)

### Justificarea State Machine-ului ales:

Am ales o arhitecturÄƒ de tip **Event-Driven Sequence (SecvenÈ›Äƒ declanÈ™atÄƒ de eveniment)**, deoarece procesul de sortare a deÈ™eurilor este discret: sistemul aÈ™teaptÄƒ apariÈ›ia unui obiect, Ã®l proceseazÄƒ È™i apoi revine la starea iniÈ›ialÄƒ.

**StÄƒrile principale sunt:**
1. **IDLE:** Sistemul aÈ™teaptÄƒ Ã®n mod economic declanÈ™area senzorului (simulat prin tasta SPACE) pentru a nu consuma resurse inutil.
2. **PREPROCESS:** Imaginea capturatÄƒ este decupatÄƒ (Center Crop) pentru a elimina fundalul irelevant È™i redimensionatÄƒ la 224x224 pixeli (input-ul CNN-ului).
3. **INFERENCE:** Modelul CNN primeÈ™te imaginea procesatÄƒ È™i returneazÄƒ un vector de probabilitÄƒÈ›i pentru cele 6 clase.
4. **DECISION & ACTUATION:** Se aplicÄƒ un prag de siguranÈ›Äƒ (45%). DacÄƒ modelul este nesigur, obiectul este marcat ca "UNKNOWN" pentru a preveni contaminarea fluxului de sortare.

**TranziÈ›iile critice:**
- **IDLE â†’ CAPTURE:** Trebuie sÄƒ fie instantanee (latenÈ›Äƒ minimÄƒ) pentru a prinde obiectul Ã®n miÈ™care pe bandÄƒ.
- **DECISION â†’ ACTUATION:** DeterminÄƒ acÈ›iunea fizicÄƒ (afiÈ™area rezultatului pe ecran Ã®n aceastÄƒ etapÄƒ de prototipare).

---

## 4. Scheletul Complet al Modulelor

Sistemul este Ã®mpÄƒrÈ›it Ã®n 3 module funcÈ›ionale independente, conform cerinÈ›elor de arhitecturÄƒ software:

### Modul 1: Data Logging / Acquisition
- **Cale:** `src/data_acquisition/collect_data.py`
- **FuncÈ›ionalitate:** Permite utilizatorului sÄƒ construiascÄƒ rapid un set de date propriu.
- **Detalii:** Scriptul utilizeazÄƒ OpenCV pentru a accesa camera È™i salveazÄƒ imaginile direct Ã®n structura de foldere necesarÄƒ antrenÄƒrii (`data/generated/{categorie}/`). Include feedback vizual (chenar) pentru Ã®ncadrare corectÄƒ.

### Modul 2: Neural Network Module
- **Cale:** `src/neural_network/`
- **Componente:** - `train_model.py`: Definirea È™i antrenarea arhitecturii CNN (Conv2D + MaxPooling + Dropout).
  - `evaluate.py`: Script pentru generarea matricei de confuzie È™i a rapoartelor de performanÈ›Äƒ pe setul de test.
- **Model:** Arhitectura compilatÄƒ este salvatÄƒ Ã®n `models/model_final.keras`.

### Modul 3: Web Service / UI (AplicaÈ›ia PrincipalÄƒ)
- **Cale:** `src/app/main.py`
- **FuncÈ›ionalitate:** IntegreazÄƒ camera web, logica de State Machine È™i modelul antrenat pentru a oferi predicÈ›ii Ã®n timp real.
- **Input:** Flux video live + Tasta SPACE (Trigger senzor prezenÈ›Äƒ).
- **Output:** Suprapunere graficÄƒ pe video cu clasa detectatÄƒ È™i nivelul de Ã®ncredere (%). AfiÈ™eazÄƒ starea curentÄƒ a sistemului (IDLE, PROCESSING, etc.).

---

## 5. Structura Repository-ului

```text
PROIECT_RETELE_NEURONALE/
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ generated/         # Date originale (ContribuÈ›ie proprie - 40%)
â”‚   â”œâ”€â”€ raw/               # Dataset public iniÈ›ial (redimensionat)
â”‚   â”œâ”€â”€ train/             # Split automat
â”‚   â”œâ”€â”€ validation/
â”‚   â””â”€â”€ test/
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ state_machine.png  # Diagrama arhitecturii
â”‚   â”œâ”€â”€ images/            # Grafice (Confusion Matrix, Loss/Acc)
â”‚   â””â”€â”€ screenshots/       # Dovezi funcÈ›ionare UI
â”œâ”€â”€ models/
â”‚   â””â”€â”€ model_final.keras  # Modelul compilat È™i antrenat
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â””â”€â”€ main.py        # AplicaÈ›ia principalÄƒ (SIA - Modul 3)
â”‚   â”œâ”€â”€ data_acquisition/
â”‚   â”‚   â””â”€â”€ collect_data.py # Script colectare date (Modul 1)
â”‚   â””â”€â”€ neural_network/    # (Modul 2)
â”‚       â”œâ”€â”€ train_model.py
â”‚       â””â”€â”€ evaluate.py
â”œâ”€â”€ README.md              # DocumentaÈ›ia generalÄƒ a proiectului
â””â”€â”€ README_Etapa4_Arhitectura_SIA.md # Acest fiÈ™ier (SpecificaÈ›ii Etapa 4)